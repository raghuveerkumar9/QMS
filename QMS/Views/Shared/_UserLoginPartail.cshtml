
@using Domain
@model Registration
@{
    ViewBag.Title = "Login";
    //Layout = "~/Views/Shared/_Otherlayout.cshtml";
    List<SelectListItem> GenderList = new List<SelectListItem>();
    GenderList.Add(new SelectListItem
    {
        Text = "Male",
        Value = "M"
    });
    GenderList.Add(new SelectListItem
    {
        Text = "Female",
        Value = "F"
    });
}
<style>
    .modal-dialog {
        right: auto;
        left: 50%;
        width: 30%;
        padding-top: 30px;
        padding-bottom: 30px;
    }
</style>
<div class="padding">

    <div class="row">
         
        <div class="col-xs-12 col-md-12">

            <div class="login">
                <div class="col-sm-12 col-md-12">

                    <div class="form-group">
                        <div class="col-sm-12 col-md-12">
                            <br />
                            <div class="loginbox radius">
                                <div class="loginboxinner radius" align="center">

                                    <div class="loginform" align="center">

                                        <div class="form-group">

                                            <input class="form-control" id="UserMobile" maxlength="10" placeholder="Enter Mobile Number" type="text" onkeypress="return IsNumeric(event);">
                                        </div>
                                        <div class="form-group">
                                            <input class="form-control" id="UserPass" placeholder="Enter Password" maxlength="16" type="password" />
                                        </div>
                                        <div class="form-group">
                                            <button type="submit" onclick="userlogin()" class="btn btn-success">Sign In </button>
                                        </div>
                                        <a href="javascript:void(0);" data-toggle="modal" data-target="#1">Forget password ?</a>

                                    </div>
                                </div>
                            </div>

                            <div class="agileits-modal modal fade in login-page" id="1" tabindex="-1" role="dialog" aria-labelledby="product-pop" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h2 style="text-align: center; font-size: 20px; font-weight: bold; color: #333333;">Password recovery</h2>
                                        </div>
                                        <div class="modal-body">
                                            <div class="form-group">
                                                <h6 style="text-align: center; color: grey;"> Here enter your registered mobile no for recover password</h6>
                                            </div>


                                            <div class="form-group">
                                                <input class="form-control" id="FUserMobile" maxlength="10" placeholder="Enter Mobile Number" type="text" onkeypress="return IsNumeric(event);">
                                            </div>



                                            <div class="form-group">
                                                <input class="form-control" id="FDOB" type="text">
                                            </div>



                                            <div class="form-group text-center">
                                                <button id="SendPassword" type="submit" onclick="ForgetPassword()" class="btn btn-success">Show Password</button>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-sm-12 col-md-12">
                        <div class="loginbox radius">
                            <h2 style="text-align: center; font-size: 36px; font-weight: bold; color: #333;">Sign Up</h2>
                            <div class="loginboxinner radius" align="center">
                                <div class="loginheader">
                                    <h4 class="title" style="color: #F44336; font-family: 'Offside', cursive; font-size: 1.8em;margin-bottom:10px">Create a new account.</h4>
                                </div>
                                <div class="loginform" align="center">
                                    <div class="form-group">
                                        <input class="form-control" id="SUserMobile" maxlength="10" placeholder="Enter Mobile Number" type="text" onkeypress="return IsNumeric(event);">
                                    </div>
                                    <div class="form-group">
                                        <input class="form-control" id="SUserPass" placeholder="Enter Password" maxlength="16" type="password">
                                    </div>
                                    <div class="form-group">
                                        <input class="form-control" id="Name" placeholder="Enter Full Name" maxlength="100" type="text">
                                    </div>
                                    <div class="form-group">
                                        @Html.DropDownList("Gender", new SelectList(GenderList, "Value", "Text"), new { @class = "form-control" })
                                    </div>
                                    <div class="form-group">
                                        <input class="form-control" id="DOB" maxlength="10" type="text">
                                    </div>
                                    <div class="form-group">
                                        <input class="form-control" id="referralcode" placeholder="Enter if have any Referral Code" value="@ViewBag.referralcode" maxlength="7" type="text">

                                    </div>
                                    <div class="form-group">
                                        By proceeding further you agree to <a href="javascript:void(0);" data-toggle="modal" data-target="#TermsUses">Terms</a>
                                    </div> 
                                    <div class="form-group">
                                        <button type="submit" onclick="UserSinup()" class="btn btn-success">Sign Up </button>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        
    </div>
</div>


<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.10/jquery.mask.js"></script>
<script>
    function fValidation(varfield, varAlert) {

        alert(varAlert);
        var varX = document.getElementById(varfield).offsetTop;
        var varY = document.getElementById(varfield).offsetLeft;
        window.scrollTo(varX, varY);
        document.getElementById(varfield).focus();
    }
    $(document).ready(function ($) {

        $('#FDOB').mask("99/99/9999", { placeholder: "DD/MM/YYYY" });
        $('#DOB').mask("99/99/9999", { placeholder: "DD/MM/YYYY" });

    });
    $(document).ready(function($){


        var id = '#dialog';

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set heigth and width to mask to fill up the whole screen
        $('#mask').css({ 'width': maskWidth, 'height': maskHeight });

        //transition effect
        $('#mask').fadeIn(1000);
        $('#mask').fadeTo("slow", 0.8);

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        $(id).css('top', winH / 2 - $(id).height() / 2);
        $(id).css('left', winW / 2 - $(id).width() / 2);

        //transition effect
        $(id).fadeIn(2000);

        //if close button is clicked
        $('.window .close').click(function (e) {
            //Cancel the link behavior
            e.preventDefault();

            $('#mask').hide();
            $('.window').hide();
        });

        //if mask is clicked
        $('#mask').click(function () {
            $(this).hide();
            $('.window').hide();
        });

    });
    function UserSinup() {
        if (stripBlanks(document.getElementById('SUserMobile').value) == "" || document.getElementById('SUserMobile').value.length != 10) {
            fValidation('SUserMobile', 'Please  Enter 10 Digit Mobile No.');
            document.getElementById('SUserMobile').focus();
            return false;
        }
        if (stripBlanks(document.getElementById('SUserPass').value) == "") {
            fValidation('SUserPass', 'Please  Enter password');
            document.getElementById('SUserPass').focus();
            return false;
        }
        if (stripBlanks(document.getElementById('Name').value) == "") {
            fValidation('Name', 'Please  Enter Name');
            document.getElementById('Name').focus();
            return false;
        }
        if (stripBlanks(document.getElementById('DOB').value) == "" || !validateDate(document.getElementById('DOB').value)) {
            fValidation('DOB', 'Please  Enter Date of Birth in [DD/MM/YYYY] Format');
            document.getElementById('DOB').focus();
            return false;
        }



        $.ajax({

            type: 'POST',
            url: '@Url.Action("Sinup", "Registration")',
            data: { UserMobile: $('#SUserMobile').val(), UserPass: $('#SUserPass').val(), Name: $('#Name').val(), Gender: $('#Gender').val(), DOB: $('#DOB').val(),
                ReferralCode: $('#referralcode').val()
            },
            success: function (response) {
                debugger;
                if (response.split('^')[0] == "Success") {
                    window.location.href = window.location.href = "/Products";
                }
                else {
                    alert(response);
                }

            },
            error: function (response) {

            }
        });
    }
    function ForgetPassword() {
        if (stripBlanks(document.getElementById('FUserMobile').value) == "" || document.getElementById('FUserMobile').value.length != 10) {
            fValidation('FUserMobile', 'Please  Enter 10 Digit Mobile No.');
            document.getElementById('FUserMobile').focus();
            return false;
        }
        if (stripBlanks(document.getElementById('FDOB').value) == "" || !validateDate(document.getElementById('FDOB').value)) {
            fValidation('FDOB', 'Please  Enter Date of Birth in [DD/MM/YYYY] Format');
            document.getElementById('FDOB').focus();
            return false;
        }
        $.ajax({

            type: 'POST',
            url: '@Url.Action("ForgetPassword", "Registration")',
            data: { UserMobile: $('#FUserMobile').val(), DOB: $('#FDOB').val() },

            success: function (response) {
                alert(response);
            },
            error: function (response) {

            }
        });
    }
    function userlogin() {
        if (stripBlanks(document.getElementById('UserMobile').value) == "" || document.getElementById('UserMobile').value.length != 10) {
            fValidation('UserMobile', 'Please  Enter 10 Digit Mobile No.');
            document.getElementById('UserMobile').focus();
            return false;
        }
        if (stripBlanks(document.getElementById('UserPass').value) == "") {
            fValidation('UserPass', 'Please  Enter password');
            document.getElementById('UserPass').focus();
            return false;
        }
        $.ajax({

            type: 'POST',
            url: '@Url.Action("Login", "Registration")',
            data: { UserMobile: $('#UserMobile').val(), UserPass: $('#UserPass').val() },

            success: function (response) {
                debugger;
                if (response.split('^')[0] == "Success") {
                    window.location.href = "/Products";
                }
                else {
                    alert(response);
                }


            },
            error: function (response) {

            }
        });

    }

    function IsNumeric(key) {
        var keycode = (key.which) ? key.which : key.keyCode;
        if (keycode > 31 && (keycode < 48 || keycode > 57)) {
            //alert(" You can enter only Digit 0 to 9 ");
            return false;
        }
        else return true;
    }

</script>
<script>
    // set endpoint and your access key
    var access_key = 'YOUR_ACCESS_KEY';
    var phone_number = '14158586273';

    // verify phone number via AJAX call
    $.ajax({
        url: 'http://apilayer.net/api/validate?access_key=' + access_key + '&number=' + phone_number,
        dataType: 'jsonp',
        success: function (json) {

            // Access and use your preferred validation result objects
            console.log(json.valid);
            console.log(json.country_code);
            console.log(json.carrier);

        }
    });
</script>
